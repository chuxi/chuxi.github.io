<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    <title>
         shadowproxy for openwrt
        
    </title>
    

    
         <link rel="icon" type="image/png" href=&#x2F;icon&#x2F;favicon.jpeg />
    

    

    

    
        <!-- Cloudflare Web Analytics -->
        <script defer src='https://static.cloudflareinsights.com/beacon.min.js'
                data-cf-beacon='{"token": "a2ea65bd409f4a6d980c46cde3dc09c2"}'>
        </script><!-- End Cloudflare Web Analytics -->
    

    
    
        <script src=https://chuxi.github.io/js/feather.min.js></script>
    


    
        <link href=https://chuxi.github.io/css/fonts.css rel="stylesheet" />
    

    <link rel="stylesheet" type="text/css" media="screen" href=https://chuxi.github.io/css/main.css />

    

    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    
        <meta name="description" content="基于shadowsocks-rust redir&amp;dns开发的openwrt的透明代理软件">
    
    


</head>


<body>
    <div class="content">
        <header>
    <div class="main" id="main_title">
        <a href=https:&#x2F;&#x2F;chuxi.github.io>Chuxi&#x27;s Daily Posts</a>
    </div>

    <nav>
        
            <a href=&#x2F;>Home</a>
        
            <a href=&#x2F;posts>All posts</a>
        
            <a href=&#x2F;about>About</a>
        
            <a href=&#x2F;tags>Tags</a>
        

        
            |

            
                <a href=&#x2F;>en</a>
            
        

        
    </nav>
</header>


        
    
<main>
    <article>
        <div class="title">
            <h1 class="title">shadowproxy for openwrt</h1>
            <div class="meta">
                
                on  2024-01-03

                
            </div>
        </div>

        

        <section class="body">
            <h2 id="jie-shao">介绍</h2>
<p>在<code>shadowsocks-rust openwrt</code>部署过程中，需要大量的手工配置，十分繁琐，所以为了将整个流程自动化以及配置文件可视化，在openwrt平台上开发了项目<code>shadowproxy</code>，便于快速搭建部署openwrt的透明代理服务。</p>
<p>目前该服务在个人设备上，家庭内全局代理模式下，运行十分流畅，所以分享出来，同时禁止任何非法使用。</p>
<h2 id="an-zhuang">安装</h2>
<p>在<a href="https://github.com/9566618/shadowproxy">shadowproxy</a>下载最新的发布版本，通过openwrt软件包页面安装，或者使用命令 <code>opkg install xxx.ipk</code> 。</p>
<p>该项目包含已经编译好的执行文件，与 <code>shadowsocks-rust</code> 开源项目相比，默认采用 <code>local-dns,local-redir,security-replay-attack-detect</code>，以及部分优化，若有安全顾虑可以使用官方源代码自行编译。</p>
<h2 id="pei-zhi">配置</h2>
<p>除默认配置项目外，用户仅需配置 <code>servers</code> 一项，增加自己的服务器信息，并且勾选启用。其他配置项目参考官方文档配置即可。</p>
<p>在ACL配置中，默认域名解析均不会通过代理服务器，可以通过ACL配置内增加域名，将该域名加入代理名单。 </p>
<p>在启动过程中， <code>shadowproxy</code>会自动配置路由信息，<code>dnsmasq</code>转发，以及<code>nftables</code> 透明路由，整个流程非常简单，易于使用。</p>
<h2 id="you-shi">优势</h2>
<p>相比于当前一些比较流行的透明代理配置，比如 Clash，V2ray等，基于 <code>shadowsocks-rust</code> 本身协议，能最轻量化部署透明代理服务。</p>
<p>同时该配置十分简单，易于使用，相比于原官方的 <code>shadowsocks-rust</code> 配置，大大缩小需要设置的项目，能及时更新代理域名列表，实现ACL分流。</p>
<p>出于个人强迫症心理，不喜欢使用旁路由模式，认为应当有自由的权利，通过方便的分流配置，实现完全无感知的透明代理上网。</p>
<h2 id="kuo-zhan">扩展</h2>
<p>该透明代理部署能够搭配 <code>OpenVPN</code> + <code>DDNS</code> 服务，支持所有平台设备代理上网，即在家里部署该透明代理，手机笔记本等在外面时，通过 <code>OpenVPN</code> 访问家里的 <code>OpenWrt</code>网关设备，即可实现代理科学上网。该模式下能将一个网关设备分享给众多的其他设备使用，对于公司组织等提供极大的便利。</p>
<h2 id="juan-zeng">捐赠</h2>
<p>目前个人使用服务器节点部署在 <code>vultr</code>上，如果感兴趣可以通过下面的推荐码注册账号并且部署服务器，后续该项目也会完善服务器端一键部署功能。</p>
<p>通过<a href="https://www.vultr.com/?ref=6849375">Vultr邀请码</a>注册，我可以获得$35的服务器额度，而新用户可以获得价值$100的优惠券，有问题也可以在github上提交issue。</p>
<h2 id="reference">Reference</h2>
<ol>
<li><a href="https://openwrt.org/docs/guide-user/services/vpn/openvpn/server">OpenVPN Server on OpenWrt</a></li>
<li><a href="https://openvpn.net/client/">OpenVPN Client</a></li>
<li><a href="https://p3terx.com/archives/openwrt-cloudflare-ddns.html">DDNS Cloudflare</a></li>
</ol>

        </section>

        
            <div class="post-tags">
                <nav class="nav tags">
                    <ul class="tags">
                        
                            <li><a href=https://chuxi.github.io/tags/network/>network</a></li>
                        
                            <li><a href=https://chuxi.github.io/tags/shadowsocks/>shadowsocks</a></li>
                        
                            <li><a href=https://chuxi.github.io/tags/rust/>rust</a></li>
                        
                    </ul>
                </nav>
            </div>
        

    </article>
</main>



        <footer>
  <div style="display:flex">
    
        <a class="soc" href=https:&#x2F;&#x2F;github.com&#x2F;chuxi title=GitHub>
            <i data-feather=github></i>
        </a>
    
        <a class="soc" href=https:&#x2F;&#x2F;twitter.com&#x2F;chuxiking title=Twitter>
            <i data-feather=twitter></i>
        </a>
    
  </div>
  <div class="footer-info">
    2024 © chuxi |
  </div>
</footer>


<script>
    feather.replace();
</script>


    </div>
</body>

</html>
